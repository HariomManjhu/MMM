<!-- Updated index.ejs (dynamic BMI + calorie intake arcs + login prompt if not logged in) -->
<%- include("partials/header") %>

<div class="container col-xxl-10 px-4 py-5">
  <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
    <div class="col-12 col-lg-7">
      <img src="/eating-salad.jpeg" class="d-block mx-lg-auto img-fluid rounded-4 shadow" alt="Healthy Lifestyle" />
    </div>
    <div class="col-lg-5 bg-dark text-white p-4 rounded-4 shadow-sm">
      <h1 class="display-5 fw-bold lh-1 mb-3">Fuel Your Body, Track Your Progress</h1>
      <p class="lead">
        Welcome to your personal health dashboard. Monitor calories, macros, BMI, and stay consistent with your fitness journey.
      </p>
      <% if (session.user) { %>
        <a href="/dashboard" class="btn btn-success btn-lg px-4">Open Dashboard</a>
      <% } else { %>
        <a href="/login" class="btn btn-warning btn-lg px-4">Login to Get Started</a>
      <% } %>
    </div>
  </div>
</div>

<section style="background: #f2faff; padding: 60px 0;">
  <div class="container text-center">
    <h2 class="mb-5 fw-bold">Your Health Stats</h2>

    <% if (session.user) { %>
    <div class="row justify-content-center g-4">
      <!-- BMI Arc -->
      <div class="col-md-6 d-flex justify-content-center">
        <div class="position-relative" style="width: 250px; height: 125px; padding-top: 20px;">

          <svg width="250" height="125" viewBox="0 0 250 125">
            <path d="M20,125 A105,105 0 0,1 230,125" fill="none" stroke="#e2e2e2" stroke-width="20"/>
            <path d="M20,125 A105,105 0 0,1 <%= bmiArcX %>,<%= bmiArcY %>" fill="none" stroke="#28a745" stroke-width="20"/>
          </svg>
          <div class="position-absolute top-51 start-50 translate-middle text-center">
            <h3 class="fw-bold mb-0">BMI: <%= bmi %></h3>
            <div class="text-muted"><%= bmiStatus %></div>
          </div>
        </div>
      </div>

      <!-- Calorie Arc -->
      <div class="col-md-6 d-flex justify-content-center">
        <div class="position-relative" style="width: 250px; height: 125px; padding-top: 20px;">
          <svg width="250" height="125" viewBox="0 0 250 125">
            <path d="M20,125 A105,105 0 0,1 230,125" fill="none" stroke="#e2e2e2" stroke-width="20"/>
            <path d="M20,125 A105,105 0 0,1 <%= calArcX %>,<%= calArcY %>" fill="none" stroke="#fd7e14" stroke-width="20"/>
          </svg>
          <div class="position-absolute top-51 start-50 translate-middle text-center">
  <h5 class="fw-bold mb-0"><%= todayCalories %> / <%= calorieGoal %> kcal</h>
 <h5> <div class="text-muted">Today's Intake</div> </h5>
</div>

        </div>
      </div>
    </div>
    <% } else { %>
      <p class="text-muted fs-5">Login to view your BMI and daily calorie progress.</p>
      <a href="/login" class="btn btn-primary">Login</a>
    <% } %>
  </div>
</section>
<section style="padding: 20px 0; background-color: #f8f9fa;">
    <div class="container" style="max-width: 900px;">
      <h2 class="border-bottom pb-2 fs-5">MMM Features</h2>
      
      <div class="row g-2 row-cols-1 row-cols-md-3">
        <style>
          .feature-card {
            display: flex;
            align-items: start;
            text-decoration: none;
            color: inherit;
            transition: transform 0.2s ease-in-out;
            border-radius: 8px;
            padding: 8px;
          }
          .feature-card:hover {
            background-color: #f0f0f0;
            transform: scale(1.015);
          }
          .icon-box {
            background-color: #6c757d;
            color: #fff;
            width: 40px;
            height: 40px;
            min-width: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
          }
          .feature-card:hover .icon-box {
            background-color: #0d6efd;
          }
          .feature-text {
            font-size: 0.9rem;
            margin-left: 10px;
          }
          .feature-text h3 {
            font-size: 1rem;
            margin-bottom: 0.2rem;
          }
          .feature-text p {
            margin: 0;
            color: #6c757d;
          }
        </style>

<!-- Column 1: Count Macros -->
<div class="col-md-4 mb-4">
  <a href="/logmeal" class="feature-card text-decoration-none text-dark">
    <div class="icon-box mb-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-backpack4-fill" viewBox="0 0 16 16">
        <path d="M8 0a2 2 0 0 0-2 2H3.5a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h4v.5a.5.5 0 0 0 1 0V7h4a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H10a2 2 0 0 0-2-2m1 2a1 1 0 0 0-2 0zm-4 9v2h6v-2h-1v.5a.5.5 0 0 1-1 0V11z"/>
        <path d="M14 7.599A3 3 0 0 1 12.5 8H9.415a1.5 1.5 0 0 1-2.83 0H3.5A3 3 0 0 1 2 7.599V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM4 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5z"/>
      </svg>
    </div>
    <div class="feature-text">
      <h3>Count Macros</h3>
      <p>Easily track your carbs, protein and fats daily.</p>
    </div>
  </a>
</div>


<!-- Column 2: Analyze Intake -->
<div class="col-md-4 mb-4">
  <a href="/dashboard" class="feature-card text-decoration-none text-dark">
    <div class="icon-box mb-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-graph-up" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M0 0h1v15h15v1H0zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07"/>
      </svg>
    </div>
    <div class="feature-text">
      <h3>Analyze Intake</h3>
      <p>Break down your meals and get instant stats.</p>
    </div>
  </a>
</div>


<!-- Column 3: Customize Goals -->
<div class="col-md-4 mb-4">
  <a href="/Change_goal" class="feature-card text-decoration-none text-dark">
    <div class="icon-box mb-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-bullseye" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
        <path d="M8 13A5 5 0 1 1 8 3a5 5 0 0 1 0 10m0 1A6 6 0 1 0 8 2a6 6 0 0 0 0 12"/>
        <path d="M8 11a3 3 0 1 1 0-6 42 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8"/>
        <path d="M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
      </svg>
    </div>
    <div class="feature-text">
      <h3>Customize Goals</h3>
      <p>Set personal targets and monitor progress.</p>
    </div>
  </a>
</div>


<%- include("partials/footer") %>
